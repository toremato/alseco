(function(t){function e(e){for(var n,i,c=e[0],s=e[1],l=e[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,c=1;c<r.length;c++){var s=r[c];0!==o[s]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},o={app:0},a=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/alseco/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"2fb4":function(t,e,r){},3960:function(t,e,r){"use strict";var n=r("ff9f"),o=r.n(n);o.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],i={created:function(){this.$store.dispatch("testFirebase").then((function(t){console.log("Dispatch from app: ",t)}))}},c=i,s=(r("5c0b"),r("2877")),l=Object(s["a"])(c,o,a,!1,null,null,null),u=l.exports,d=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex m-auto flex flex-col"},[r("table",{staticClass:"w-full table-fixed border-collapse bg-white select-none",attrs:{id:"main-table"}},[t._m(0),r("tbody",t._l(t.records,(function(e){return r("tr",{key:e.name,on:{click:t.toggleRow,dblclick:function(r){return t.onDoubleClick(e)},contextmenu:function(e){return e.preventDefault(),t.test(e)}}},[r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.items.length))]),r("td",[t._v(t._s(e.total))])])})),0)]),r("div",{staticClass:"mt-20"},[r("button",{staticClass:"px-4 py-2 rounded text-white bg-teal-400 hover:bg-teal-500 focus:outline-none",on:{click:t.addNewRecord}},[t._v("Добавить")])])])},f=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"bg-teal-200"},[r("tr",[r("th",{staticClass:"w-2/5"},[t._v("ФИО")]),r("th",[t._v("Количество")]),r("th",{staticClass:"w-2/5"},[t._v("Общая стоимость")])])])}],p=r("b85c"),v={data:function(){return{employees:[{name:"Пупкин В.С",itemsCount:2,total:124301},{name:"Маратов А.К",itemsCount:3,total:3e5},{name:"Маратова Д.Б",itemsCount:1,total:12e4},{name:"Калдыбаев К.М",itemsCount:2,total:25e3},{name:"Кунанбаев А",itemsCount:4,total:1430500}]}},computed:{records:function(){return this.$store.state.records}},created:function(){this.$nextTick((function(){}))},methods:{test:function(){console.log("Delete")},removeRecord:function(t){console.log(t)},highlightRows:function(){var t,e=document.querySelector("#main-table"),r=e.getElementsByTagName("tr"),n=Object(p["a"])(r);try{var o=function(){var e=t.value;e.onclick=function(){var t,n=Object(p["a"])(r);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.classList.remove("selected-row")}}catch(a){n.e(a)}finally{n.f()}e.classList.add("selected-row")}};for(n.s();!(t=n.n()).done;)o()}catch(a){n.e(a)}finally{n.f()}},toggleRow:function(t){console.log("Toggle: ",t.path[1],t);var e,r=t.path[1],n=document.querySelector("#main-table"),o=n.getElementsByTagName("tr"),a=Object(p["a"])(o);try{for(a.s();!(e=a.n()).done;){var i=e.value;i!=r&&i.classList.remove("selected-row")}}catch(c){a.e(c)}finally{a.f()}r.classList.toggle("selected-row")},onDoubleClick:function(t){console.log("Double"),this.$router.push({name:"EditRecord",params:{record:t}})},addNewRecord:function(){this.$router.push({name:"NewRecord"})}}},h=v,g=(r("d77f"),Object(s["a"])(h,m,f,!1,null,"effd7dd4",null)),b=g.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Surname")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.surname,expression:"record.surname"}],attrs:{type:"text"},domProps:{value:t.record.surname},on:{input:function(e){e.target.composing||t.$set(t.record,"surname",e.target.value)}}})]),r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.name,expression:"record.name"}],attrs:{type:"text"},domProps:{value:t.record.name},on:{input:function(e){e.target.composing||t.$set(t.record,"name",e.target.value)}}})]),r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Patronymic")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.patronymic,expression:"record.patronymic"}],attrs:{type:"text"},domProps:{value:t.record.patronymic},on:{input:function(e){e.target.composing||t.$set(t.record,"patronymic",e.target.value)}}})]),r("table",{staticClass:"table-fixed"},[t._m(0),r("transition-group",{attrs:{name:"list",tag:"tbody"}},[t._l(t.record.items,(function(e,n){return r("tr",{key:e.id},[r("td",{on:{click:function(r){return t.removeRow(e.id)}}},[t._v(t._s(n+1))]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"w-full",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value)}}})]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"w-full text-right",attrs:{type:"text"},domProps:{value:e.price},on:{input:function(r){r.target.composing||t.$set(e,"price",r.target.value)}}})])])})),r("tr",{key:"total-row"},[r("td",{staticClass:"text-right font-bold",attrs:{colspan:"2"}},[t._v("Итого")]),r("td",{staticClass:"text-right font-bold"},[t._v(t._s(t.total))])])],2)],1),r("button",{on:{click:t.addRecordRow}},[t._v("+++")]),r("button",{on:{click:t.addRecord}},[t._v("ADD")])])])},x=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("№")]),r("th",[t._v("Название")]),r("th",[t._v("Стоимость")])])])}],y=(r("c740"),r("a434"),r("d3b7"),r("25f0"),{data:function(){return{record:{name:"",surname:"",patronymic:"",items:[{name:"",price:"",id:"lkn2oi3nfpwme"}]}}},computed:{total:function(){var t,e=0,r=Object(p["a"])(this.record.items);try{for(r.s();!(t=r.n()).done;){var n=t.value;e+=+n.price}}catch(o){r.e(o)}finally{r.f()}return e}},methods:{addRecordRow:function(){var t="_"+Math.random().toString(36).substr(2,9);this.record.items.push({name:"",price:"",id:t})},removeRow:function(t){var e=this.record.items.findIndex((function(e){return e.id===t}));this.record.items.splice(e,1),console.log("Index: ",e,this.record.items)},addRecord:function(){this.record.total=this.total,this.$store.dispatch("addDocument",this.record)}}}),_=y,C=(r("3960"),Object(s["a"])(_,w,x,!1,null,"5f5c3fe6",null)),R=C.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Surname")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.surname,expression:"record.surname"}],attrs:{type:"text"},domProps:{value:t.record.surname},on:{input:function(e){e.target.composing||t.$set(t.record,"surname",e.target.value)}}})]),r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.name,expression:"record.name"}],attrs:{type:"text"},domProps:{value:t.record.name},on:{input:function(e){e.target.composing||t.$set(t.record,"name",e.target.value)}}})]),r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Patronymic")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.patronymic,expression:"record.patronymic"}],attrs:{type:"text"},domProps:{value:t.record.patronymic},on:{input:function(e){e.target.composing||t.$set(t.record,"patronymic",e.target.value)}}})]),r("table",{staticClass:"table-fixed"},[t._m(0),r("transition-group",{attrs:{name:"list",tag:"tbody"}},[t._l(t.record.items,(function(e,n){return r("tr",{key:e.id},[r("td",{on:{click:function(r){return t.removeRow(e.id)}}},[t._v(t._s(n+1))]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"w-full",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value)}}})]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"w-full text-right",attrs:{type:"text"},domProps:{value:e.price},on:{input:function(r){r.target.composing||t.$set(e,"price",r.target.value)}}})])])})),r("tr",{key:"total-row"},[r("td",{staticClass:"text-right font-bold",attrs:{colspan:"2"}},[t._v("Итого")]),r("td",{staticClass:"text-right font-bold"},[t._v(t._s(t.total))])])],2)],1),r("button",{on:{click:t.addRecordRow}},[t._v("+++")]),r("button",{on:{click:t.editRecord}},[t._v("EDIT")])])])},k=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("№")]),r("th",[t._v("Название")]),r("th",[t._v("Стоимость")])])])}],j={data:function(){return{record:{name:"",surname:"",patronymic:"",items:[{name:"",price:"",id:"lkn2oi3nfpwme"}]}}},computed:{total:function(){var t,e=0,r=Object(p["a"])(this.record.items);try{for(r.s();!(t=r.n()).done;){var n=t.value;e+=+n.price}}catch(o){r.e(o)}finally{r.f()}return e}},created:function(){console.log("Params: ",this.$route.params),this.record=this.$route.params.record},methods:{addRecordRow:function(){var t="_"+Math.random().toString(36).substr(2,9);this.record.items.push({name:"",price:"",id:t})},removeRow:function(t){var e=this.record.items.findIndex((function(e){return e.id===t}));this.record.items.splice(e,1),console.log("Index: ",e,this.record.items)},editRecord:function(){var t=this;this.record.total=this.total,this.$store.dispatch("editRecord",this.record).then((function(){t.$router.go(-1)}))}}},O=j,P=(r("5f6a"),Object(s["a"])(O,$,k,!1,null,"84699bae",null)),N=P.exports;n["a"].use(d["a"]);var E=[{path:"/",name:"Home",component:b},{path:"/new",name:"NewRecord",component:R},{path:"/edit",name:"EditRecord",component:N}],S=new d["a"]({routes:E}),D=S,I=(r("99af"),r("4160"),r("159b"),r("96cf"),r("1da1")),T=r("5530"),M=r("2f62"),B=r("59ca"),L=(r("e71f"),{apiKey:"AIzaSyC2HCYgQYgHwmK9YB8hYxgkUzGhs4ZBXMs",authDomain:"",databaseURL:"https://test-project-4aee7.firebaseio.com",projectId:"test-project-4aee7",storageBucket:"",messagingSenderId:"",appId:""}),A=B["initializeApp"](L),F=A.firestore(),Y=F.collection("records");n["a"].use(M["a"]);var z=new M["a"].Store({state:{records:[]},mutations:{setRecords:function(t,e){t.records=e}},actions:{testFirebase:function(t){var e=t.commit;return new Promise((function(t,r){var n=[];Y.get().then((function(r){r.forEach((function(t){console.log("".concat(t.id," => ").concat(t.data()," ").concat(t)),n.push(Object(T["a"])({id:t.id},t.data()))})),console.log("Employees: ",n),e("setRecords",n),t(n)})).catch((function(t){console.log("Error: ",t),r(t)}))}))},addDocument:function(t,e){return Object(I["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,console.log("Record: ",e),r.next=4,Y.add(e).then((function(t){console.log("Added document: ",t),n("testFirebase")}));case 4:case"end":return r.stop()}}),r)})))()},editRecord:function(t,e){var r=t.dispatch;return console.log("Editing record: ",e),new Promise((function(t,n){Y.doc(e.id).set(e).then((function(e){console.log("Document updated: ",e),r("testFirebase"),t(e)})).catch((function(t){n(t)}))}))}},modules:{}});r("2fb4");n["a"].config.productionTip=!1,new n["a"]({router:D,store:z,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),o=r.n(n);o.a},"5f6a":function(t,e,r){"use strict";var n=r("d273"),o=r.n(n);o.a},"8b19":function(t,e,r){},"9c0c":function(t,e,r){},d273:function(t,e,r){},d77f:function(t,e,r){"use strict";var n=r("8b19"),o=r.n(n);o.a},ff9f:function(t,e,r){}});
//# sourceMappingURL=app.4371bc8b.js.map