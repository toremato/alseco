(function(t){function e(e){for(var n,c,i=e[0],a=e[1],l=e[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,i=1;i<r.length;i++){var a=r[i];0!==o[a]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},o={app:0},s=[];function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/alseco/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=a;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0ab9":function(t,e,r){"use strict";var n=r("4ae8"),o=r.n(n);o.a},"2fb4":function(t,e,r){},"4ae8":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view",{staticClass:"flex m-auto flex-col",attrs:{id:"app-content"}})],1)},s=[],c={created:function(){this.$store.dispatch("getRecords")}},i=c,a=(r("5c0b"),r("2877")),l=Object(a["a"])(i,o,s,!1,null,null,null),u=l.exports,d=r("8c4f"),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("filters",{on:{change:function(e){t.page=1,t.sortBy="surname"}}}),r("table",{staticClass:"w-full table-fixed border-collapse bg-white select-none",attrs:{id:"main-table"}},[r("caption",[t._v(" Список сотрудников ")]),r("thead",{staticClass:"bg-gray-700 text-white"},[r("tr",[r("th",{staticClass:"w-2/5",on:{click:function(e){return t.changeSorting("surname")}}},[r("div",{staticClass:"flex w-full h-full justify-center items-center"},[t._v(" ФИО сотрудника "),r("svg",{staticClass:"w-4 h-4 fill-current text-gray-300 ml-2",attrs:{viewBox:"0 0 401.998 401.998"}},[r("path",{class:{"sorting-active":"surname"===t.sortBy},attrs:{d:"M73.092,164.452h255.813c4.949,0,9.233-1.807,12.848-5.424c3.613-3.616,5.427-7.898,5.427-12.847\n\t\t\tc0-4.949-1.813-9.229-5.427-12.85L213.846,5.424C210.232,1.812,205.951,0,200.999,0s-9.233,1.812-12.85,5.424L60.242,133.331\n\t\t\tc-3.617,3.617-5.424,7.901-5.424,12.85c0,4.948,1.807,9.231,5.424,12.847C63.863,162.645,68.144,164.452,73.092,164.452z"}}),r("path",{class:{"sorting-active":"-surname"===t.sortBy},attrs:{d:"M328.905,237.549H73.092c-4.952,0-9.233,1.808-12.85,5.421c-3.617,3.617-5.424,7.898-5.424,12.847\n\t\t\tc0,4.949,1.807,9.233,5.424,12.848L188.149,396.57c3.621,3.617,7.902,5.428,12.85,5.428s9.233-1.811,12.847-5.428l127.907-127.906\n\t\t\tc3.613-3.614,5.427-7.898,5.427-12.848c0-4.948-1.813-9.229-5.427-12.847C338.139,239.353,333.854,237.549,328.905,237.549z"}})])])]),r("th",{on:{click:function(e){return t.changeSorting("itemsCount")}}},[r("div",{staticClass:"flex w-full h-full justify-center items-center"},[t._v(" Кол-во предметов "),r("svg",{staticClass:"w-4 h-4 fill-current text-gray-300 ml-2",attrs:{viewBox:"0 0 401.998 401.998"}},[r("path",{class:{"sorting-active":"itemsCount"===t.sortBy},attrs:{d:"M73.092,164.452h255.813c4.949,0,9.233-1.807,12.848-5.424c3.613-3.616,5.427-7.898,5.427-12.847\n\t\t\tc0-4.949-1.813-9.229-5.427-12.85L213.846,5.424C210.232,1.812,205.951,0,200.999,0s-9.233,1.812-12.85,5.424L60.242,133.331\n\t\t\tc-3.617,3.617-5.424,7.901-5.424,12.85c0,4.948,1.807,9.231,5.424,12.847C63.863,162.645,68.144,164.452,73.092,164.452z"}}),r("path",{class:{"sorting-active":"-itemsCount"===t.sortBy},attrs:{d:"M328.905,237.549H73.092c-4.952,0-9.233,1.808-12.85,5.421c-3.617,3.617-5.424,7.898-5.424,12.847\n\t\t\tc0,4.949,1.807,9.233,5.424,12.848L188.149,396.57c3.621,3.617,7.902,5.428,12.85,5.428s9.233-1.811,12.847-5.428l127.907-127.906\n\t\t\tc3.613-3.614,5.427-7.898,5.427-12.848c0-4.948-1.813-9.229-5.427-12.847C338.139,239.353,333.854,237.549,328.905,237.549z"}})])])]),r("th",{staticClass:"w-2/5",on:{click:function(e){return t.changeSorting("totalPrice")}}},[r("div",{staticClass:"flex w-full h-full justify-center items-center"},[t._v(" Общая стоимость "),r("svg",{staticClass:"w-4 h-4 fill-current text-gray-300 ml-2",attrs:{viewBox:"0 0 401.998 401.998"}},[r("path",{class:{"sorting-active":"totalPrice"===t.sortBy},attrs:{d:"M73.092,164.452h255.813c4.949,0,9.233-1.807,12.848-5.424c3.613-3.616,5.427-7.898,5.427-12.847\n\t\t\tc0-4.949-1.813-9.229-5.427-12.85L213.846,5.424C210.232,1.812,205.951,0,200.999,0s-9.233,1.812-12.85,5.424L60.242,133.331\n\t\t\tc-3.617,3.617-5.424,7.901-5.424,12.85c0,4.948,1.807,9.231,5.424,12.847C63.863,162.645,68.144,164.452,73.092,164.452z"}}),r("path",{class:{"sorting-active":"-totalPrice"===t.sortBy},attrs:{d:"M328.905,237.549H73.092c-4.952,0-9.233,1.808-12.85,5.421c-3.617,3.617-5.424,7.898-5.424,12.847\n\t\t\tc0,4.949,1.807,9.233,5.424,12.848L188.149,396.57c3.621,3.617,7.902,5.428,12.85,5.428s9.233-1.811,12.847-5.428l127.907-127.906\n\t\t\tc3.613-3.614,5.427-7.898,5.427-12.848c0-4.948-1.813-9.229-5.427-12.847C338.139,239.353,333.854,237.549,328.905,237.549z"}})])])])])]),t.records.length?r("tbody",[t._l(t.records,(function(e){return r("tr",{key:e.id,on:{click:t.toggleRow,dblclick:function(r){return t.onDoubleClick(e)},contextmenu:function(r){return r.preventDefault(),function(r){return t.openContextMenu(r,e)}(r)}}},[r("td",[t._v(t._s(t.formatName(e)))]),r("td",[t._v(t._s(e.items.length))]),r("td",[t._v(t._s(t.formatPrice(e.totalPrice)))])])})),t._l(10-t.records.length,(function(e){return r("tr",{key:e,staticClass:"empty-row opacity-0 border-none"},[r("td",[t._v("-")]),r("td",[t._v("-")]),r("td",[t._v("-")])])}))],2):r("tbody",[t._m(0)])]),r("div",{staticClass:"pagination-buttons flex justify-end items-center mt-6"},[t.pagesCount?r("span",{staticClass:"mr-4"},[t._v(" Стр. "+t._s(t.page)+" из "+t._s(t.pagesCount)+" ")]):t._e(),r("button",{staticClass:"w-8 h-8 mr-2 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center",attrs:{disabled:!t.pagesCount||1===t.page},on:{click:function(e){return t.changePage(-1)}}},[r("svg",{staticClass:"w-4 h-4 fill-current color-white transform rotate-180",attrs:{viewBox:"0 0 320.001 320.001"}},[r("path",{attrs:{d:"M295.84,146.049l-256-144c-4.96-2.784-11.008-2.72-15.904,0.128C19.008,5.057,16,10.305,16,16.001v288\n\tc0,5.696,3.008,10.944,7.936,13.824c2.496,1.44,5.28,2.176,8.064,2.176c2.688,0,5.408-0.672,7.84-2.048l256-144\n\tc5.024-2.848,8.16-8.16,8.16-13.952S300.864,148.897,295.84,146.049z"}})])]),r("button",{staticClass:"w-8 h-8 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center",attrs:{disabled:!t.pagesCount||t.page===t.pagesCount},on:{click:function(e){return t.changePage(1)}}},[r("svg",{staticClass:"w-4 h-4 fill-current",attrs:{viewBox:"0 0 320.001 320.001"}},[r("path",{attrs:{d:"M295.84,146.049l-256-144c-4.96-2.784-11.008-2.72-15.904,0.128C19.008,5.057,16,10.305,16,16.001v288\n\tc0,5.696,3.008,10.944,7.936,13.824c2.496,1.44,5.28,2.176,8.064,2.176c2.688,0,5.408-0.672,7.84-2.048l256-144\n\tc5.024-2.848,8.16-8.16,8.16-13.952S300.864,148.897,295.84,146.049z"}})])])]),r("div",{staticClass:"mt-12"},[r("button",{staticClass:"px-6 py-2 rounded text-white bg-teal-400 hover:bg-teal-500 focus:outline-none",on:{click:t.addNewRecord}},[t._v(" Добавить ")])]),r("context-menu",{attrs:{show:t.showContextMenu,position:t.contextMenuPosition},on:{mouseleave:t.closeContextMenu}},[r("div",{staticClass:"w-64 bg-white border flex flex-col shadow-lg"},[r("div",{staticClass:"cursor-pointer hover:bg-gray-200 py-3 border-b",on:{click:t.confirmDeletion}},[t._v(" Удалить ")]),r("transition",{attrs:{name:"slide-down"}},[t.confirmation?r("div",{},[r("div",{staticClass:"my-4"},[t._v("Вы уверены?")]),r("div",{staticClass:"flex"},[r("div",{staticClass:"w-1/2 flex justify-center py-3 cursor-pointer hover:bg-gray-200 text-red-400",on:{click:t.deleteRecord}},[t._v(" Да ")]),r("div",{staticClass:"w-1/2 flex justify-center py-3 cursor-pointer hover:bg-gray-200",on:{click:t.closeContextMenu}},[t._v(" Нет ")])])]):t._e()])],1)])],1)},m=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td",{staticClass:"hover:bg-white",staticStyle:{height:"410px"},attrs:{rowspan:"5",colspan:"3"}},[t._v(" Нет записей ")])])}],p=(r("99af"),r("caad"),r("a15b"),r("a434"),r("b0c0"),r("ac1f"),r("2532"),r("1276"),r("b85c")),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show?r("div",{style:{top:t.position.y,left:t.position.x},attrs:{id:"context-menu"},on:{mouseleave:t.onMouseLeave,contextmenu:function(t){t.preventDefault()}}},[t._t("default")],2):t._e()},v=[],g={props:{show:{type:Boolean,default:!1},position:{type:Object,default:function(){return{x:"0px",y:"0px"}}}},methods:{onMouseLeave:function(){this.$emit("mouseleave")}}},b=g,x=(r("d515"),Object(a["a"])(b,h,v,!1,null,"281ad762",null)),y=x.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col mb-10 text-sm"},[r("div",{staticClass:"filters flex flex-col"},[r("div",{staticClass:"flex justify-end items-center mb-3"},[t._v(" Количество предметов: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.count.from,expression:"filters.count.from"}],staticClass:"ml-2 rounded",attrs:{type:"text"},domProps:{value:t.filters.count.from},on:{input:function(e){e.target.composing||t.$set(t.filters.count,"from",e.target.value)}}}),r("span",{staticClass:"mx-2 h-px w-2 border border-gray-500"}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.count.to,expression:"filters.count.to"}],staticClass:"rounded",attrs:{type:"text"},domProps:{value:t.filters.count.to},on:{input:function(e){e.target.composing||t.$set(t.filters.count,"to",e.target.value)}}})]),r("div",{staticClass:"flex justify-end items-center"},[t._v(" Общая стоимость: "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.price.from,expression:"filters.price.from"}],staticClass:"ml-2 rounded",attrs:{type:"text"},domProps:{value:t.filters.price.from},on:{input:function(e){e.target.composing||t.$set(t.filters.price,"from",e.target.value)}}}),r("span",{staticClass:"mx-2 h-px w-2 border border-gray-500"}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.price.to,expression:"filters.price.to"}],staticClass:"rounded",attrs:{type:"text"},domProps:{value:t.filters.price.to},on:{input:function(e){e.target.composing||t.$set(t.filters.price,"to",e.target.value)}}})])]),r("div",{staticClass:"flex justify-end mt-6 text-white"},[r("button",{staticClass:"py-1 rounded bg-teal-400 hover:bg-teal-500",on:{click:t.applyFilters}},[t._v(" Применить ")]),r("button",{staticClass:"py-1 rounded bg-gray-500 hover:bg-gray-600 ml-6",on:{click:t.resetFilters}},[t._v(" Сбросить ")])])])},w=[],_={data:function(){return{filters:{count:{from:null,to:null},price:{from:null,to:null}}}},methods:{applyFilters:function(){this.$store.dispatch("filterRecords",this.filters),this.$emit("change")},resetFilters:function(){this.filters={count:{from:null,to:null},price:{from:null,to:null}},this.$store.dispatch("resetFilters"),this.$emit("change")}}},R=_,P=(r("68c9"),Object(a["a"])(R,C,w,!1,null,"1aa70412",null)),$=P.exports,j={components:{ContextMenu:y,Filters:$},data:function(){return{showContextMenu:!1,focusedRecord:{},contextMenuPosition:{x:"0px",y:"0px"},sortBy:"surname",page:1,confirmation:!1}},computed:{records:function(){return this.$store.getters.currentRecords},pagesCount:function(){return Math.ceil(this.$store.getters.visibleRecords.length/10)}},methods:{formatName:function(t){var e=t.patronymic?t.patronymic.charAt(0)+".":"";return"".concat(t.surname," ").concat(t.name.charAt(0),".").concat(e)},formatPrice:function(t){var e=String(t).split("").reverse();return e.length>3&&e.splice(3,0," "),e.length>7&&e.splice(7,0," "),e.reverse().join("")},openContextMenu:function(t,e){this.contextMenuPosition={x:t.x-2+"px",y:t.y-2+"px"},this.showContextMenu=!0,this.focusedRecord=e},closeContextMenu:function(){this.showContextMenu=!1,this.confirmation=!1},toggleRow:function(t){var e,r=t.path[1],n=document.querySelector("#main-table"),o=n.getElementsByTagName("tr"),s=Object(p["a"])(o);try{for(s.s();!(e=s.n()).done;){var c=e.value;c!=r&&c.classList.remove("selected-row")}}catch(i){s.e(i)}finally{s.f()}r.classList.toggle("selected-row")},confirmDeletion:function(){this.confirmation=!0},deleteRecord:function(){this.$store.dispatch("deleteRecord",this.focusedRecord),this.closeContextMenu()},onDoubleClick:function(t){console.log("Double"),this.$router.push({name:"EditRecord",params:{record:t}})},addNewRecord:function(){this.$router.push({name:"NewRecord"})},changeSorting:function(t){this.sortBy.includes(t)?"-"===this.sortBy.charAt(0)?this.sortBy=t:this.sortBy="-"+t:this.sortBy=t,this.$store.dispatch("sortRecords",this.sortBy),this.page=1},changePage:function(t){this.page+=t,this.$store.dispatch("paginateRecords",this.page)}}},k=j,M=(r("a4d1"),Object(a["a"])(k,f,m,!1,null,"39dfa692",null)),B=M.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("record-form",{on:{save:t.addRecord,cancel:t.onCancel}})],1)},E=[],N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Фамилия")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.surname,expression:"record.surname"}],staticClass:"info-input",attrs:{type:"text"},domProps:{value:t.record.surname},on:{input:function(e){e.target.composing||t.$set(t.record,"surname",e.target.value)}}})]),r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Имя")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.name,expression:"record.name"}],staticClass:"info-input",attrs:{type:"text"},domProps:{value:t.record.name},on:{input:function(e){e.target.composing||t.$set(t.record,"name",e.target.value)}}})]),r("div",{staticClass:"w-1/2 flex mb-8 items-center"},[r("span",{staticClass:"w-1/3 text-right mr-4"},[t._v("Отчество")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.patronymic,expression:"record.patronymic"}],staticClass:"info-input",attrs:{type:"text"},domProps:{value:t.record.patronymic},on:{input:function(e){e.target.composing||t.$set(t.record,"patronymic",e.target.value)}}})]),r("table",{staticClass:"table-fixed mt-12"},[r("caption",[t._v(" Список выданных материальных ценностей ")]),t._m(0),r("transition-group",{attrs:{name:"list",tag:"tbody"}},[t._l(t.record.items,(function(e,n){return r("tr",{key:e.id},[r("td",[t._v(t._s(n+1))]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"w-full",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(r){r.target.composing||t.$set(e,"name",r.target.value)}}})]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"w-full text-right",attrs:{type:"text"},domProps:{value:e.price},on:{input:function(r){r.target.composing||t.$set(e,"price",r.target.value)}}})]),r("td",{staticClass:"table-buttons"},[r("svg",{staticClass:"w-5 h-5 text-red-500 cursor-pointer fill-current hover:text-red-600",attrs:{height:"512pt",viewBox:"0 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(r){return t.removeRow(e.id)}}},[r("path",{attrs:{d:"m256 0c-141.164062 0-256 114.835938-256 256s114.835938 256 256 256 256-114.835938 256-256-114.835938-256-256-256zm94.273438 320.105469c8.339843 8.34375 8.339843 21.824219 0 30.167969-4.160157 4.160156-9.621094 6.25-15.085938 6.25-5.460938 0-10.921875-2.089844-15.082031-6.25l-64.105469-64.109376-64.105469 64.109376c-4.160156 4.160156-9.621093 6.25-15.082031 6.25-5.464844 0-10.925781-2.089844-15.085938-6.25-8.339843-8.34375-8.339843-21.824219 0-30.167969l64.109376-64.105469-64.109376-64.105469c-8.339843-8.34375-8.339843-21.824219 0-30.167969 8.34375-8.339843 21.824219-8.339843 30.167969 0l64.105469 64.109376 64.105469-64.109376c8.34375-8.339843 21.824219-8.339843 30.167969 0 8.339843 8.34375 8.339843 21.824219 0 30.167969l-64.109376 64.105469zm0 0"}})])])])})),r("tr",{key:"total-row"},[r("td",{staticClass:"text-right font-bold",attrs:{colspan:"2"}},[t._v("Итого")]),r("td",{staticClass:"text-right font-bold"},[t._v(t._s(t.total))]),r("td",{staticClass:"table-buttons"},[r("svg",{staticClass:"w-5 h-5 text-green-500 cursor-pointer fill-current hover:text-green-600",attrs:{height:"512pt",viewBox:"0 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg"},on:{click:t.addRecordRow}},[r("path",{attrs:{d:"m256 0c-141.164062 0-256 114.835938-256 256s114.835938 256 256 256 256-114.835938 256-256-114.835938-256-256-256zm112 277.332031h-90.667969v90.667969c0 11.777344-9.554687 21.332031-21.332031 21.332031s-21.332031-9.554687-21.332031-21.332031v-90.667969h-90.667969c-11.777344 0-21.332031-9.554687-21.332031-21.332031s9.554687-21.332031 21.332031-21.332031h90.667969v-90.667969c0-11.777344 9.554687-21.332031 21.332031-21.332031s21.332031 9.554687 21.332031 21.332031v90.667969h90.667969c11.777344 0 21.332031 9.554687 21.332031 21.332031s-9.554687 21.332031-21.332031 21.332031zm0 0"}})])])])],2)],1),r("div",{staticClass:"flex justify-center text-white mt-20"},[r("button",{staticClass:"py-2 px-6 rounded bg-teal-400 hover:bg-teal-500",on:{click:t.saveRecord}},[t._v(" Сохранить ")]),r("button",{staticClass:"ml-6 py-2 px-6 rounded bg-gray-500 hover:bg-gray-600",on:{click:t.onCancel}},[t._v(" Отмена ")])])])])},S=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"bg-gray-700 border border-gray-700 text-white"},[r("tr",[r("th",[t._v("№")]),r("th",[t._v("Название")]),r("th",[t._v("Стоимость")]),r("th",{staticClass:"table-buttons"})])])}],z=(r("c740"),r("d3b7"),r("25f0"),function(){return"_"+Math.random().toString(36).substr(2,9)}),L={props:{record:{type:Object,default:function(){return{name:"",surname:"",patronymic:"",itemsCount:1,totalPrice:0,items:[{name:"",price:"",id:z()}]}}}},data:function(){return{}},computed:{total:function(){var t,e=0,r=Object(p["a"])(this.record.items);try{for(r.s();!(t=r.n()).done;){var n=t.value;e+=+n.price}}catch(o){r.e(o)}finally{r.f()}return e},itemsCount:function(){return this.record.items.length}},watch:{total:function(t){this.record.totalPrice=t},itemsCount:function(t){this.record.itemsCount=t}},methods:{addRecordRow:function(){this.record.items.push({name:"",price:"",id:z()})},removeRow:function(t){var e=this.record.items.findIndex((function(e){return e.id===t}));this.record.items.splice(e,1)},saveRecord:function(){this.$emit("save",this.record)},onCancel:function(){this.$emit("cancel")}}},F=L,A=(r("0ab9"),Object(a["a"])(F,N,S,!1,null,"0099b34b",null)),D=A.exports,I={components:{RecordForm:D},data:function(){return{}},methods:{onCancel:function(){this.$router.push("/")},addRecord:function(t){var e=this;this.$store.dispatch("createRecord",t).then((function(){e.$router.push("/")}))}}},H=I,T=Object(a["a"])(H,O,E,!1,null,"0cd05c0a",null),V=T.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("record-form",{attrs:{record:t.record},on:{cancel:t.onCancel,save:t.editRecord}})],1)},G=[],X={components:{RecordForm:D},data:function(){return{record:{name:"",surname:"",patronymic:"",itemsCount:1,totalPrice:0,items:[{name:"",price:"",id:""}]}}},created:function(){this.record=this.$route.params.record},methods:{onCancel:function(){this.$router.push("/")},editRecord:function(t){var e=this;this.$store.dispatch("editRecord",t).then((function(){e.$router.push("/")}))}}},J=X,K=Object(a["a"])(J,Y,G,!1,null,"3220abaa",null),U=K.exports;n["a"].use(d["a"]);var q=[{path:"/",name:"Home",component:B},{path:"/new",name:"NewRecord",component:V},{path:"/edit",name:"EditRecord",component:U}],Q=new d["a"]({routes:q}),Z=Q,W=(r("4de4"),r("4160"),r("fb6a"),r("a9e3"),r("aff5"),r("159b"),r("2909")),tt=r("5530"),et=r("2f62"),rt=r("59ca"),nt=(r("e71f"),{apiKey:"AIzaSyC2HCYgQYgHwmK9YB8hYxgkUzGhs4ZBXMs",authDomain:"",databaseURL:"https://test-project-4aee7.firebaseio.com",projectId:"test-project-4aee7",storageBucket:"",messagingSenderId:"",appId:""}),ot=rt["initializeApp"](nt),st=ot.firestore(),ct=st.collection("records");n["a"].use(et["a"]);var it=new et["a"].Store({state:{records:[],visibleRecords:[],currentRecords:[],filter:{totalPrice:{from:null,to:null},itemsCount:{from:null,to:null}}},mutations:{setRecords:function(t,e){t.records=e},setVisibleRecords:function(t,e){t.visibleRecords=e},setCurrentRecords:function(t,e){t.currentRecords=e}},getters:{visibleRecords:function(t){return t.visibleRecords},currentRecords:function(t){return t.currentRecords}},actions:{getRecords:function(t){var e=t.commit,r=t.dispatch;return new Promise((function(t,n){var o=[];ct.get().then((function(n){n.forEach((function(t){o.push(Object(tt["a"])({id:t.id},t.data()))})),console.log("Employees: ",o),e("setRecords",o),e("setVisibleRecords",o),r("sortRecords"),t(o)})).catch((function(t){console.error("Error: ",t),n(t)}))}))},createRecord:function(t,e){var r=t.dispatch;return new Promise((function(t,n){ct.add(e).then((function(e){r("getRecords").then((function(){t(e)}))})).catch((function(t){return n(t)}))}))},editRecord:function(t,e){var r=t.dispatch;return new Promise((function(t,n){ct.doc(e.id).set(e).then((function(e){r("getRecords"),t(e)})).catch((function(t){return n(t)}))}))},deleteRecord:function(t,e){var r=t.dispatch;return new Promise((function(t,n){ct.doc(e.id).delete().then((function(){r("getRecords"),t()})).catch((function(t){return n(t)}))}))},filterRecords:function(t,e){var r=t.state,n=t.commit,o=t.dispatch,s={from:e.count.from?e.count.from:0,to:e.count.to?e.count.to:Number.MAX_SAFE_INTEGER},c={from:e.price.from?e.price.from:0,to:e.price.to?e.price.to:Number.MAX_SAFE_INTEGER},i=Object(W["a"])(r.records).filter((function(t){return t.totalPrice>=+c.from&&t.totalPrice<=+c.to&&t.itemsCount>=+s.from&&t.itemsCount<=+s.to}));n("setVisibleRecords",i),o("sortRecords")},resetFilters:function(t){var e=t.state,r=t.commit,n=t.dispatch;r("setVisibleRecords",e.records),n("sortRecords")},sortRecords:function(t){var e=t.state,r=t.commit,n=t.dispatch,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"surname",s=Object(W["a"])(e.visibleRecords);switch(o){case"surname":s.sort((function(t,e){var r=t.surname+t.name+t.patronymic,n=e.surname+e.name+e.patronymic;return r>n?1:n>r?-1:0}));break;case"-surname":s.sort((function(t,e){var r=t.surname+t.name+t.patronymic,n=e.surname+e.name+e.patronymic;return r>n?-1:n>r?1:0}));break;case"itemsCount":s.sort((function(t,e){return t.itemsCount-e.itemsCount}));break;case"-itemsCount":s.sort((function(t,e){return e.itemsCount-t.itemsCount}));break;case"totalPrice":s.sort((function(t,e){return t.totalPrice-e.totalPrice}));break;case"-totalPrice":s.sort((function(t,e){return e.totalPrice-t.totalPrice}));break;default:break}r("setVisibleRecords",s),n("paginateRecords")},paginateRecords:function(t){var e=t.state,r=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=e.visibleRecords.slice((n-1)*o,n*o);r("setCurrentRecords",s)}},modules:{}});r("2fb4");n["a"].config.productionTip=!1,new n["a"]({router:Z,store:it,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("9c0c"),o=r.n(n);o.a},"68c9":function(t,e,r){"use strict";var n=r("f0ad"),o=r.n(n);o.a},"9c0c":function(t,e,r){},a4d1:function(t,e,r){"use strict";var n=r("fc36"),o=r.n(n);o.a},d515:function(t,e,r){"use strict";var n=r("fc7e"),o=r.n(n);o.a},f0ad:function(t,e,r){},fc36:function(t,e,r){},fc7e:function(t,e,r){}});
//# sourceMappingURL=app.5e9ddeed.js.map